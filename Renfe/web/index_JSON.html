<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>JSON</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            function cargarProvincias(){
                peticion_http = new XMLHttpRequest();

                peticion_http.onreadystatechange = muestraProvincias;
                peticion_http.open('GET', './cargarProvincias_JSON.jsp', true);
                peticion_http.send(null);
            }
            
            function muestraProvincias(){
                if (peticion_http.readyState == 4) {
                    if (peticion_http.status == 200) {

                        var respuesta_json = peticion_http.responseText;
                        var objeto_json = eval("(" + respuesta_json + ")");

                        for (var x = 0; x < objeto_json.length; x++) {
                            var codigo = objeto_json[x].codigo;
                            var nombre = objeto_json[x].nombre;
                            var opcion = "<option value='" + codigo + "'>" + nombre + "</option>";
                            var txt = txt + opcion;
                        }

                        document.getElementById("origen").innerHTML = txt;
                    }
                }
            }
            
            function cargarMunicipios(){
                peticion_http = new XMLHttpRequest();

                peticion_http.onreadystatechange = muestraMunicipios;
                var id=document.getElementById("origen").value;
                peticion_http.open("POST", "cargarMunicipios_JSON.jsp" + "?id=" + id, true);
            }
            
            function muestraMunicipios(){
                if (peticion_http.readyState == 4) {
                    if (peticion_http.status == 200) {

                        var respuesta_json = peticion_http.responseText;
                        var objeto_json = eval("(" + respuesta_json + ")");

                        for (var x = 0; x < objeto_json.length; x++) {
                            var codigo = objeto_json[x].codigo;
                            var nombre = objeto_json[x].nombre;
                            var opcion = "<option value='" + codigo + "'>" + nombre + "</option>";
                            var txt = txt + opcion;
                        }

                        document.getElementById("destino").innerHTML = txt;
                    }
                }
            }
        </script>
    </head>
    <body onload="cargarProvincias()">

    <center>
        <div style="width:40%;">
            
            <h3>Origen</h3>
            <p>Selecciona una provincia
                <select id="origen" onchange="cargarMunicipios()">

                </select>
            </p>
            <br>
            <p>Sleccion un municipio
                <select id="destino">
                    
                </select>
            </p>
    </center>

</body>
</html>

