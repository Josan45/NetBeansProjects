<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Renfe</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript">
            function cargarProvincias(){
                peticion_http = new XMLHttpRequest();

                peticion_http.onreadystatechange = muestraProvincias;

                peticion_http.open('GET', './cargarProvincias.jsp', true);
                peticion_http.send(null);
            }
            
            function muestraProvincias(){
                
                if (peticion_http.readyState == 4) {
                    if (peticion_http.status == 200) {

                        var documento_xml = peticion_http.responseXML;
                        var x = documento_xml.getElementsByTagName("nombre");

                        //alert(longitud);
                        for (var y = 0; y < x.length; y++) {
                            var codpro = documento_xml.getElementsByTagName("codpro")[y].firstChild.nodeValue;
                            var nombre = documento_xml.getElementsByTagName("nombre")[y].firstChild.nodeValue;
                            var txt = txt + "<option value=" + codpro + ">" + nombre + "</option>";
                        }
                        document.getElementById("origen").innerHTML = txt;
                    }
                }
            }
            
            function cargarMunicipios(){
                var id=document.getElementById("origen").value;
                peticion_http = new XMLHttpRequest();

                peticion_http.onreadystatechange = muestraMunicipios;

                peticion_http.open('POST', './cargarMunicipios.jsp', true);
                peticion_http.send(null);
                
                var query_string = crea_query();
                peticion_http.send(query_string);
            }
            
            function muestraMunicipios(){
                
                if (peticion_http.readyState == 4) {
                    if (peticion_http.status == 200) {

                        var documento_xml = peticion_http.responseXML;
                        var x = documento_xml.getElementsByTagName("cod");

                        //alert(longitud);
                        for (var y = 0; y < x.length; y++) {
                            var cod = documento_xml.getElementsByTagName("cod")[y].firstChild.nodeValue;
                            var nombre = documento_xml.getElementsByTagName("nombre")[y].firstChild.nodeValue;
                            var txt = txt + "<option value=" + cod + ">" + nombre + "</option>";
                        }
                        document.getElementById("destino").innerHTML = txt;
                    }
                }
            }

        </script>
        <style type="text/css">
           
        </style>
    </head>
    <body onload="cargarProvincias()">
        <h3>Origen</h3>
            <p>Selecciona un origen
                <select id="origen" onchange="cargarMunicipios()">

                </select>
            </p><br>
            <p>Selecciona un destino
                <select id="destino">

                </select>
            </p>
            <br>
            <input type="button" onclick="muestraBillete()">
    </body>
</html>